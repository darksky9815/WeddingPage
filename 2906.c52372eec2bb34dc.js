"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2906],{2906:($,_,c)=>{c.r(_),c.d(_,{ConfirmationPageModule:()=>I});var f=c(5564),h=c(4341),g=c(3092),G=c(9262),p=c(467),n=c(1360),C=c(7907);function P(t,m){1&t&&n.nrm(0,"ion-spinner",7)}function b(t,m){if(1&t){const o=n.RV6();n.j41(0,"div")(1,"h3",2),n.EFF(2),n.k0s(),n.j41(3,"ion-checkbox",10),n.mxI("ngModelChange",function(i){n.eBV(o);const s=n.XpG(2);return n.DH7(s.familyGuest.confirmation,i)||(s.familyGuest.confirmation=i),n.Njj(i)}),n.EFF(4),n.k0s()()}if(2&t){const o=n.XpG(2);n.R7$(2),n.JRh(o.familyGuest.guestName),n.R7$(),n.R50("ngModel",o.familyGuest.confirmation),n.R7$(),n.JRh(o.mensajeParaConfirmar)}}function y(t,m){if(1&t&&(n.j41(0,"ion-label",5),n.EFF(1),n.k0s()),2&t){const o=n.XpG().index,e=n.XpG(3);n.R7$(),n.JRh(e.plusGuestWarnings[o])}}function M(t,m){if(1&t){const o=n.RV6();n.j41(0,"div")(1,"ion-input",13),n.mxI("ngModelChange",function(i){const s=n.eBV(o).index,a=n.XpG(3);return n.DH7(a.plusGuest[s].plusGuestName,i)||(a.plusGuest[s].plusGuestName=i),n.Njj(i)}),n.bIt("ionChange",function(){const i=n.eBV(o).index,s=n.XpG(3);return n.Njj(s.onChangePlusGuest(i))})("ionBlur",function(){const i=n.eBV(o).index,s=n.XpG(3);return n.Njj(s.onBlurPlusGuest(i))}),n.k0s(),n.DNE(2,y,2,1,"ion-label",14),n.j41(3,"ion-checkbox",15),n.mxI("ngModelChange",function(i){const s=n.eBV(o).index,a=n.XpG(3);return n.DH7(a.plusGuest[s].confirmation,i)||(a.plusGuest[s].confirmation=i),n.Njj(i)}),n.EFF(4),n.k0s()()}if(2&t){const o=m.index,e=n.XpG(3);n.R7$(),n.R50("ngModel",e.plusGuest[o].plusGuestName),n.R7$(),n.Y8G("ngIf",e.plusGuestWarnings[o]),n.R7$(),n.R50("ngModel",e.plusGuest[o].confirmation),n.R7$(),n.SpI("\xbfAcompa\xf1ar\xe1 a ",e.guestNameValue,"?")}}function N(t,m){if(1&t&&(n.j41(0,"div")(1,"h3",2),n.EFF(2,"Acompa\xf1antes:"),n.k0s(),n.DNE(3,M,5,4,"div",12),n.nrm(4,"br"),n.k0s()),2&t){const o=n.XpG(2);n.R7$(3),n.Y8G("ngForOf",o.plusGuest)}}function j(t,m){1&t&&n.nrm(0,"ion-spinner",7)}function x(t,m){if(1&t){const o=n.RV6();n.j41(0,"div")(1,"p",8),n.EFF(2),n.j41(3,"ion-checkbox",9),n.mxI("ngModelChange",function(i){n.eBV(o);const s=n.XpG();return n.DH7(s.isAttending,i)||(s.isAttending=i),n.Njj(i)}),n.k0s()(),n.j41(4,"ion-checkbox",10),n.mxI("ngModelChange",function(i){n.eBV(o);const s=n.XpG();return n.DH7(s.isAttending,i)||(s.isAttending=i),n.Njj(i)}),n.EFF(5),n.k0s(),n.DNE(6,b,5,3,"div",6)(7,N,5,1,"div",6),n.nrm(8,"br"),n.j41(9,"ion-button",11),n.bIt("click",function(){n.eBV(o);const i=n.XpG();return n.Njj(i.onClick())}),n.EFF(10,"Confirmar"),n.k0s(),n.DNE(11,j,1,0,"ion-spinner",4),n.k0s()}if(2&t){const o=n.XpG();n.R7$(2),n.SpI(" ",o.mensajeParaConfirmar," "),n.R7$(),n.R50("ngModel",o.isAttending),n.R7$(),n.R50("ngModel",o.isAttending),n.R7$(),n.JRh(o.mensajeParaConfirmar),n.R7$(),n.Y8G("ngIf",null!=o.familyGuest),n.R7$(),n.Y8G("ngIf",o.guest&&null!==o.guest.numberofPlus&&o.guest.numberofPlus>0),n.R7$(4),n.Y8G("ngIf",o.loading)}}function v(t){return null==t||""===t||!/\d/.test(t)}const R=[{path:"",component:(()=>{var t;class m{constructor(e){this.apiService=e,this.isAttending=!1,this.guestNameValue="",this.Warning="",this.GuestName="",this.plusGuest=[],this.guest=null,this.familyGuest=null,this.validateGuest=!1,this.mensajeParaConfirmar="",this.ConfirmationMessage="",this.plusGuestWarnings=[],this.loading=!1}ngOnInit(){}onEnter(e){var i=this;return(0,p.A)(function*(){e.target.blur(),i.plusGuest=[],i.Warning="",i.GuestName="",i.loading=!0,i.validateGuest=yield i.ValidateGuestName(),i.loading=!1})()}onChange(){this.Warning="",this.validateGuest=!1,this.guest=null,this.familyGuest=null,this.isAttending=!1,this.GuestName="",this.ConfirmationMessage="",this.plusGuest=[],this.plusGuestWarnings=[]}ValidateGuestName(){var e=this;return(0,p.A)(function*(){var i,s,a,r,u,d;if(function F(t){return null==t||null!==t.match(/^\s*$/)}(e.guestNameValue))return e.Warning="Favor de ingresar un nombre.",!1;if(!v(e.guestNameValue))return e.Warning="Favor de no ingrasar numeros.",!1;if(!1===(yield e.findGuest()))return!1;if(e.GuestName=null!==(i=null===(s=e.guest)||void 0===s?void 0:s.guestName)&&void 0!==i?i:"",e.isAttending=null!==(a=null===(r=e.guest)||void 0===r?void 0:r.confirmation)&&void 0!==a&&a,e.mensajeParaConfirmar=e.isAttending?"Su confirmaci\xf3n ya fue realizada. \n \xbfQuieres cambiar tu confirmaci\xf3n?":"\xbfTe unes a la fiesta o nos vas a dejar bailando solos?",e.guest&&null!==(null===(u=e.guest)||void 0===u?void 0:u.numberofPlus)&&(null===(d=e.guest)||void 0===d?void 0:d.numberofPlus)>0)if(null===e.guest.plusGuest||0===e.guest.plusGuest.length){console.log(e.guest.numberofPlus),e.guest.plusGuest=[];for(let l=0;l<e.guest.numberofPlus;l++)e.plusGuest.push({id:0,guestId:e.guest.id,plusGuestName:"",confirmation:null});e.guest.plusGuest=e.plusGuest.map(l=>({id:l.id,guestId:l.guestId,plusGuestName:l.plusGuestName,confirmation:l.confirmation,plusConfirmationDate:null,guest:e.guest}))}else e.plusGuest=e.guest.plusGuest.map(l=>({id:l.id,guestId:l.guestId,plusGuestName:l.plusGuestName,confirmation:l.confirmation}));return!0})()}findGuest(){var e=this;return(0,p.A)(function*(){var i;return e.guest=yield new Promise((s,a)=>{e.apiService.findGuest(e.guestNameValue).subscribe({next:r=>s(r),error:r=>(e.Warning=r.error||"An error occurred",e.loading=!1,!1)})}),null!=(null===(i=e.guest)||void 0===i?void 0:i.familyId)&&(e.familyGuest=yield new Promise((s,a)=>{var r,u;e.apiService.findFamilyGuest(null===(r=e.guest)||void 0===r?void 0:r.familyId,null===(u=e.guest)||void 0===u?void 0:u.id).subscribe({next:d=>s(d),error:d=>{const l=d.error||"An error occurred";e.loading=!1,console.log(l)}})})),!0})()}onBlurPlusGuest(e){this.ValidatePlusGuest(e)}onChangePlusGuest(e){this.ValidatePlusGuest(e)}ValidatePlusGuest(e){this.plusGuestWarnings[e]="";const i=this.plusGuest[e];v(i.plusGuestName)?void 0===this.plusGuest.find(s=>""!==s.plusGuestName&&s.plusGuestName.toLowerCase()===i.plusGuestName.toLowerCase()&&s.id!==i.id)||(this.plusGuestWarnings[e]="El nombre del invitado ya existe. Ingrese su apellido para diferenciarlos."):this.plusGuestWarnings[e]="Favor de no ingresar n\xfameros."}onClick(){var e;if(this.loading=!0,this.validateGuest){if(null!==(null===(e=this.guest)||void 0===e?void 0:e.numberofPlus)&&this.plusGuest.every(a=>""===a.plusGuestName)&&this.plusGuest.some(a=>null!==a.confirmation&&!0===a.confirmation))return void(this.Warning="Favor de ingresar al menos un nombre de acompa\xf1ante.");if(this.plusGuestWarnings.length>0&&this.plusGuestWarnings.some(a=>""!==a))return void(this.Warning="Favor de corregir los errores en los nombres de los acompa\xf1antes.");if(this.guest){const a={id:this.guest.id,confirmation:this.isAttending};if(0!==this.plusGuest.length&&this.apiService.postPlusConfirme(this.plusGuest).subscribe({error:r=>{console.error(r),this.loading=!1,this.Warning="Error al enviar la confirmaci\xf3n de los acompa\xf1antes."}}),null!==this.guest.familyId&&(void 0!==this.familyGuest||null!==this.familyGuest)){var i,s;const r={id:null===(i=this.familyGuest)||void 0===i?void 0:i.id,confirmation:null===(s=this.familyGuest)||void 0===s?void 0:s.confirmation};this.apiService.postGuestConfirme(r).subscribe({error:u=>{var d;console.error(u),this.loading=!1,this.Warning=`Error al enviar la confirmaci\xf3n de ${null===(d=this.familyGuest)||void 0===d?void 0:d.guestName}.`}})}this.apiService.postGuestConfirme(a).subscribe({next:()=>{this.ConfirmationMessage=this.mensajeDeconfirmacion(),this.guestNameValue="",this.validateGuest=!1,this.guest=null,this.plusGuest=[],this.plusGuestWarnings=[],this.Warning=""},error:r=>{var u;console.error(r),this.loading=!1,this.Warning+=`Error al enviar la confirmaci\xf3n de ${null===(u=this.guest)||void 0===u?void 0:u.guestName}.`}})}else this.Warning="Invitado no encontrado.";this.loading=!1}}mensajeDeconfirmacion(){var e,i,s,a;const r="\nYa reservamos tu silla, tu plato\u2026 y tu pedazo de bizcocho.\n\xa1Nos hace muy felices saber que vienes! Guarda muy bien tu sobre de la invitaci\xf3n y las taquillas. Ser\xe1 requerido en momento de la entrada.",u="\nTe vamos a extra\xf1ar, pero entendemos.\nPrometemos compartir fotos, chismes y tal vez una selfie con el bizcocho.",d=this.familyGuest?`\n${this.familyGuest.guestName} tambi\xe9n ha confirmado su asistencia.`:"",l=this.familyGuest?`\n${this.familyGuest.guestName} tambi\xe9n confirmo`:"";return this.familyGuest?this.isAttending&&!0===(null===(e=this.familyGuest)||void 0===e?void 0:e.confirmation)?r+d:this.isAttending||!0!==(null===(i=this.familyGuest)||void 0===i?void 0:i.confirmation)?this.isAttending&&!1===(null===(s=this.familyGuest)||void 0===s?void 0:s.confirmation)?r+l+"."+u:this.isAttending||!1!==(null===(a=this.familyGuest)||void 0===a?void 0:a.confirmation)?"":u+l+", te vamos a extra\xf1ar.":u+d+r:this.isAttending?r:u}}return(t=m).\u0275fac=function(e){return new(e||t)(n.rXU(C.G))},t.\u0275cmp=n.VBU({type:t,selectors:[["app-confirmation"]],standalone:!1,decls:21,vars:6,consts:[["slot","start"],[1,"ion-padding"],[1,"tittles"],["placeholder","Ingrese el nombre",2,"width","50%","margin","0 auto",3,"ngModelChange","keyup.enter","ionInput","ngModel"],["name","circles",4,"ngIf"],[1,"warning"],[4,"ngIf"],["name","circles"],[1,"responsive-inline-text"],[1,"inline-checkbox",3,"ngModelChange","ngModel"],[2,"white-space","pre-line",3,"ngModelChange","ngModel"],["expand","block",2,"width","50%","margin","0 auto",3,"click"],[4,"ngFor","ngForOf"],["placeholder","Ingrese el nombre del acompa\xf1ante",2,"width","50%","margin","0 auto",3,"ngModelChange","ionChange","ionBlur","ngModel"],["class","warning",4,"ngIf"],[3,"ngModelChange","ngModel"]],template:function(e,i){1&e&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),n.nrm(3,"ion-menu-button"),n.k0s(),n.j41(4,"ion-title"),n.EFF(5,"Confirmation Date"),n.k0s()()(),n.j41(6,"ion-content",1)(7,"div")(8,"h1",2),n.EFF(9,"Formulario de confirmaci\xf3n"),n.k0s(),n.j41(10,"ion-label"),n.EFF(11,"Favor de ingresar su nombre"),n.k0s(),n.j41(12,"ion-input",3),n.mxI("ngModelChange",function(a){return n.DH7(i.guestNameValue,a)||(i.guestNameValue=a),a}),n.bIt("keyup.enter",function(a){return i.onEnter(a)})("ionInput",function(){return i.onChange()}),n.k0s(),n.DNE(13,P,1,0,"ion-spinner",4),n.j41(14,"ion-label",5),n.EFF(15),n.k0s(),n.j41(16,"h3",2),n.EFF(17),n.k0s(),n.DNE(18,x,12,7,"div",6),n.j41(19,"h4"),n.EFF(20),n.k0s()()()),2&e&&(n.R7$(12),n.R50("ngModel",i.guestNameValue),n.R7$(),n.Y8G("ngIf",i.loading),n.R7$(2),n.JRh(i.Warning),n.R7$(2),n.JRh(i.GuestName),n.R7$(),n.Y8G("ngIf",i.validateGuest),n.R7$(2),n.JRh(i.ConfirmationMessage))},dependencies:[f.Sq,f.bT,h.BC,h.vS,g.Jm,g.QW,g.eY,g.W9,g.eU,g.$w,g.he,g.MC,g.w2,g.BC,g.ai,g.hB,g.Gw],styles:["ion-menu-button[_ngcontent-%COMP%]{color:var(--ion-color-primary)}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.ion-padding[_ngcontent-%COMP%]{--background:floralwhite;display:flex;text-align:center;align-items:center;align-content:center;justify-content:center}.tittles[_ngcontent-%COMP%]{font-family:AnandaBlack;font-size:2.5em}ion-input[_ngcontent-%COMP%]{text-align:center;border-bottom:#8c8c8c;border-bottom-style:solid}.warning[_ngcontent-%COMP%]{color:#8b0000}.responsive-inline-text[_ngcontent-%COMP%]{display:inline;white-space:normal;word-break:break-word}.inline-checkbox[_ngcontent-%COMP%]{vertical-align:middle;padding:0!important;--padding-start: 0px;--padding-end: 0px;--min-width: auto;--size: 20px;transform:translateY(1px)}"]}),m})()}];let k=(()=>{var t;class m{}return(t=m).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[G.iI.forChild(R),G.iI]}),m})(),I=(()=>{var t;class m{}return(t=m).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.$C({type:t}),t.\u0275inj=n.G2t({imports:[f.MD,h.YN,g.bv,k]}),m})()}}]);